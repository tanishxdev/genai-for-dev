
# **THERE ARE ONLY TWO PLACES WHERE FIELDS GO:**

---

# **A) TOP-LEVEL → WHAT the model must do**

* (Structure, instructions, tools, schemas) = Layer 1 → TASK LAYER 
* Defines what Gemini should do.
# **B) config → HOW the model writes the answer**

* (Randomness, sampling, token limits) = Layer 2 → SAMPLING LAYER
* Controls how the next token is chosen.
---

# **A) TOP-LEVEL FIELDS (Never inside config)**

These fields define **behavior, rules, formatting, tools, schemas**.

They ALWAYS GO DIRECTLY under the main object:

```
{
  model: "",
  systemInstruction: "",
  contents: "",
  tools: [],
  responseMimeType: "",
  responseSchema: {},
  safetySettings: [...],
}
```

### **Top-Level Fields List (memorize these):**

| Top-Level Field                           | Meaning                           |
| ----------------------------------------- | --------------------------------- |
| **model**                                 | Which Gemini model to use         |
| **systemInstruction**                     | Rules, persona, constraints       |
| **contents**                              | User input / conversation message |
| **tools**                                 | Tools the model can call          |
| **responseMimeType**                      | Force output type (JSON, text)    |
| **responseSchema** / `responseJsonSchema` | Strict JSON structure             |
| **safetySettings**                        | Override/mod safety categories    |

### **Examples of VALID top-level fields:**

```
systemInstruction: "Always respond in JSON."
responseMimeType: "application/json"
responseSchema: { type: "object", properties: {...} }
tools: [githubTool]
```

### **Examples of INVALID placements:**

```
config.systemInstruction → INVALID
config.responseMimeType → INVALID
config.tools → INVALID
config.schema → INVALID
config.contents → INVALID
```

---

# **B) config FIELDS (Inside config ONLY)**

These control **token sampling**, **randomness**, **length**, **internal reasoning**.

Their job is NOT to set rules.

Only how the output is generated.

### **Config Fields List (memorize these):**

| Field inside `config` | Meaning                   |
| --------------------- | ------------------------- |
| **temperature**       | Randomness                |
| **topP**              | Nucleus sampling          |
| **topK**              | Restrict token candidates |
| **maxOutputTokens**   | Max tokens                |
| **candidateCount**    | Multiple outputs          |
| **stopSequences**     | Stop patterns             |
| **thinkingConfig**    | Internal reasoning budget |
| **responseLogprobs**  | Log probabilities         |

### **Examples of valid config fields:**

```
config: {
  temperature: 0.1,
  topK: 1,
  topP: 0.8,
  maxOutputTokens: 500,
  thinkingConfig: { thinkingBudget: 0 }
}
```

### **Examples of INVALID config fields:**

```
config: {
  systemInstruction: "...",   // WRONG
  responseMimeType: "...",    // WRONG
  schema: {...},              // WRONG
  tools: [...]                // WRONG
}
```

---

# **THE FINAL RULE (Print this and stick it on your wall):**

### **Top-level = Instructions, Tools, Format, Schema, Model, User Input**

### **config = Randomness, Sampling, Token Limit, Internal Reasoning**

---

# **Your corrected code with correct placement**

```js
import ai from "../utils/geminiClient.js";

async function main() {
  const response = await ai.models.generateContent({
    model: "gemini-2.5-flash",

    // TOP-LEVEL BEHAVIOR INSTRUCTIONS
    systemInstruction: "You are an expert AI tutor explaining clearly.",

    // USER INPUT
    contents: "Explain NodeJS.",

    // GENERATION BEHAVIOR
    config: {
      temperature: 0.1,
      maxOutputTokens: 150,
      thinkingConfig: {
        thinkingBudget: 0
      }
    }
  });

  console.log("Response:\n");
  console.log(response.text);
}

await main();
```

---

# **SUPER EASY MEMORY TRICK**

### **Think like HTML:**

Top-level = `<head>`
config = `<style>`

**Head defines the structure**
**Style defines how it looks**

---
