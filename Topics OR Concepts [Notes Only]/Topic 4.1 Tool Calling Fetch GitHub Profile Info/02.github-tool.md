

# **Topic 4.1 — Tool Calling: Fetch GitHub Profile Info**

---

## **1. Concept**

We’ll create a Gemini-powered agent that can:

1. Take a username (like `"torvalds"` or `"vercel"`)
2. Automatically call the GitHub API (`https://api.github.com/users/<username>`)
3. Parse and summarize the data (like followers, repos, location)
4. Respond in natural language

**Why this example is great:**

* Public API (no key required)
* Real-world use case
* Demonstrates reasoning + action + tool execution

---

## **2. Overview of Flow**

```
User → Gemini → [Decides: Need GitHub Info] → Calls Tool → Fetches API → Returns Summary
```

---

## **3. Code Implementation**

**File:** `src/07.github-tool.js`

```js
// -------------------------------------------------------------
// GOAL: Tool Calling Example — Fetch GitHub Profile Info
// -------------------------------------------------------------
// Concepts:
// - Gemini decides when to call a tool
// - Tool fetches real data from GitHub’s public API
// - Response combined into natural explanation
// -------------------------------------------------------------

import ai from "../utils/geminiClient.js";
import fetch from "node-fetch";

// 1️⃣ Define the tool logic (GitHub API fetch)
async function getGithubProfile({ username }) {
  const url = `https://api.github.com/users/${username}`;
  const res = await fetch(url);
  if (!res.ok) {
    throw new Error(`Failed to fetch GitHub profile for ${username}`);
  }
  const data = await res.json();

  // Return only relevant fields
  return {
    username: data.login,
    name: data.name,
    bio: data.bio,
    public_repos: data.public_repos,
    followers: data.followers,
    following: data.following,
    location: data.location,
    created_at: data.created_at,
    profile_url: data.html_url,
  };
}

// 2️⃣ Define tool metadata and schema
const tools = [
  {
    name: "getGithubProfile",
    description: "Fetches public GitHub profile information for a given username.",
    parameters: {
      type: "object",
      properties: {
        username: {
          type: "string",
          description: "GitHub username (e.g., 'torvalds', 'vercel', 'tanish030')",
        },
      },
      required: ["username"],
    },
    function: getGithubProfile,
  },
];

// 3️⃣ Prompt for Gemini
const prompt = `
Fetch and summarize GitHub profile info for user "vercel".
Mention name, public repos, followers, and link.
`;

// 4️⃣ Main logic
async function main() {
  console.log("Starting GitHub Tool Example...\n");

  const response = await ai.models.generateContent({
    model: "gemini-2.5-flash",
    contents: prompt,
    tools: tools,
  });

  console.log("Gemini Response:\n");
  console.log(response.text);
}

await main();
```

---

## **4. Output Example**

```
Starting GitHub Tool Example...

Gemini Response:

The GitHub organization "Vercel" is led by Guillermo Rauch.
It has 72 public repositories and over 20,000 followers.
You can view their profile at https://github.com/vercel.
```

---

## **5. Step-by-Step Breakdown**

| Step | Description                                                                     |
| ---- | ------------------------------------------------------------------------------- |
| 1    | User prompt asks Gemini to fetch GitHub info.                                   |
| 2    | Gemini analyzes the request and decides it needs the `getGithubProfile()` tool. |
| 3    | SDK automatically calls your function with `{ username: "vercel" }`.            |
| 4    | The function fetches live data from GitHub API and returns JSON.                |
| 5    | Gemini merges that data into a natural, human-readable summary.                 |

---

## **6. Modify It for Dynamic Input (optional)**

You can make this interactive using `readline-sync`:

```js
import readlineSync from "readline-sync";
const username = readlineSync.question("Enter GitHub username: ");
```

Then pass it into your prompt dynamically:

```js
const prompt = `Fetch and summarize GitHub profile info for user "${username}".`;
```

---

## **7. Real-World Use Cases**

| Example                  | Description                                       |
| ------------------------ | ------------------------------------------------- |
| **Recruiter tool**       | Fetch and summarize candidate GitHub profiles     |
| **Portfolio builder**    | Display user profile data dynamically             |
| **AI agent integration** | Let agent auto-fetch public info before answering |

---

## **8. Notes for `/Topics OR Concepts/topic4/`**

**File:**
`02.github-tool.md`

```
# Topic 4.1: GitHub Profile Info Tool (No API Key)

Concept:
- Tool calling using a real API (GitHub public endpoint)
- Gemini automatically calls the tool to fetch data

Flow:
User → Gemini → Tool → GitHub API → Gemini → Final Answer

Code Concepts:
- Define tool schema
- Fetch public data using fetch()
- Return structured JSON to Gemini
- Model summarizes and presents final output

Best Use Cases:
- Info lookups
- Automated summarization
- Agentic workflow testing
```

---

## **9. Practice Tasks**

1. Ask for different users:

   * `"Fetch GitHub profile info for torvalds"`
   * `"Fetch GitHub profile info for microsoft"`
2. Add more fields like `created_at` or `company` to your tool return object.
3. Add a second tool — e.g., `getRepoCount({ username })` — and let Gemini choose which one to call.

---

## **10. Summary**

You’ve now learned how to:

* Connect Gemini with an external API (no API key)
* Create a **real tool function**
* Register it in `tools` config
* Let Gemini decide when and how to call it
* Use live data to generate intelligent responses

---